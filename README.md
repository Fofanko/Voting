# Voting

**Voting** - это HTTP-сервис на Flask, реализующий API для проведения голосования  
DEMO: https://maksimuk.xyz/

## Описание API

Стандартный ответ API представляет собой JSON файл вида:
```json
{
  "success": true/false,
  "data": { полезная нагрузка },
  "error_msg": "Сообщение об ошибке"
}
```

### Endpoint's не требующие авторизации

* Регистрация в сервисе осущетсвляется по запросу:  
POST /registration  
В теле запроса должно содержаться username и password. В ответ на запрос в случае успешного прохождения регистрации в поле data будет
содержаться auth_credentials - данные для просмотра защищеного контента


### Endpoint's требующие авторизации

Для получения доступа к защищенным endpoint-ам требуется передать header WWW-Authenticate:%auth_credentials% вместе с запросом

* Просмотр списка всех доступных голосований осущетсвляется по запросу:  
GET /voting_list  
Каждый элемент списка содержит в себе идентификатор госования и его вопрос.  

* Создание голосования осуществялется по запросу:  
POST /voting_list  
В теле запроса должно содердаться поле question и массив answers. Количество вопросов должно быть больше, либо равное двум.
В ответ на запрос в поле id будет содержаться идентификатор
голосования. Пример:  
```json
{
  "question": "It's a good weather today?",
  "answers": [
    "Yes",
    "No"
  ]
}
```

* Просмотр информации о голосовании:  
GET /voting/%voting_id%, %voitng_id% - идентификатор голосования  
Полезная нагрузка содредит в себе:  
    * В случае если пользователь не проголосовал: варианты ответа и номер ответа голосования  
    * В случае если пользователь проголосовал: варианты ответа, номер ответа, маркер ответа пользователя и процент проголосовавших
    за данный овтет. Варианты ответа расположены в порядке убывания популярности  
    
* Редактирование голосования:  
PUT /voting/%voting_id%, %voitng_id% - идентификатор голосования  
В теле запроса должно содержаться поле question и массив answers. В ходе редактирования голосования, те оветы, что не
были переданы в запросе, удаляются. Если запрос содержит уже существующий ответ, то голоса, отданные за этот ответ, сохроняются.  

* Удаление голосования:  
DELETE /voting/%voting_id%, %voitng_id% - идентификатор голосования  

* Редактирование варианта ответа  
PUT /answer/%voting_id%/%answer_num%, %voitng_id% - идентификатор голосования. %answer_num% - номер ответа  
В теле запроса должно содержаться поле answer. В ходе редактирования варианта ответа ответы, отданные этому варианту, 
аннулируются  

* Удаление варианта ответа  
DELETE /answer/%voting_id%/%answer_num%, %voitng_id% - идентификатор голосования. %answer_num% - номер ответа  

* Проголосовать за вариант ответа  
POST /vote/%voting_id%, %voitng_id% - идентификатор голосования.  
В теле запроса должно содердаться поле answer_number, которое указывает, за какой конркетно вариант ответа Вы хотите отдать голос  

* Переголосовать  
PUT /vote/%voting_id%, %voitng_id% - идентификатор голосования.  
В теле запроса должно содердаться поле answer_number, которое указывает, на какой вариант ответа Вы хотите поменять свой голос  

* Удалить голос  
DELETE /vote/%voting_id%, %voitng_id% - идентификатор голосования.  
